<div class="bg-white dark:bg-gray-800 p-4 rounded shadow">
  <h2 class="text-xl font-semibold mb-3">Compras</h2>

  <table class="w-full table-auto mb-4">
    <thead>
      <tr class="text-left">
        <th class="p-2">ID</th>
        <th class="p-2">Producto</th>
        <th class="p-2">Cantidad</th>
        <th class="p-2">Precio unitario</th>
        <th class="p-2">Fecha</th>
      </tr>
    </thead>
    <tbody>
      @for (c of comprasSvc.comprasSig(); track c.id) {
        <tr>
          <td class="p-2">{{c.id}}</td>
          <td class="p-2">{{c.productoId}}</td>
          <td class="p-2">{{c.cantidad}}</td>
          <td class="p-2">{{c.precioUnitario}}</td>
          <td class="p-2">{{c.fecha}}</td>
        </tr>
      }
    </tbody>
  </table>

  <form [formGroup]="form" (ngSubmit)="add()" class="grid grid-cols-1 md:grid-cols-4 gap-3">
    <select class="border rounded px-2 py-1" formControlName="productoId">
      @for (p of productosSvc.productosSig(); track p.id) {
        <option [value]="p.id">{{ p.nombre }} (stock: {{ p.stock }})</option>
      }
    </select>
    <input class="border rounded px-2 py-1" type="number" placeholder="Cantidad" formControlName="cantidad"/>
    <input class="border rounded px-2 py-1" type="number" placeholder="Precio unitario" formControlName="precioUnitario"/>
    <input class="border rounded px-2 py-1" type="number" placeholder="Proveedor ID (opcional)" formControlName="proveedorId"/>
    <button class="bg-brand-700 text-white px-3 py-2 rounded md:col-span-4" type="submit" [disabled]="form.invalid">
      Registrar compra
    </button>
  </form>
</div>
