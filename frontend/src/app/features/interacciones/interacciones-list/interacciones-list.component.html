<div class="bg-white dark:bg-gray-800 p-6 rounded shadow max-w-6xl mx-auto">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-bold">Interacciones</h2>
  </div>
  <div
    [formGroup]="filtroForm"
    class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-xl"
  >
    <input
      type="text"
      placeholder="Filtrar por nombre de cliente..."
      formControlName="cliente"
      class="border rounded-lg px-3 py-2 shadow-sm bg-white dark:bg-gray-600"
    />

    <input
      type="date"
      placeholder="Filtrar por fecha..."
      formControlName="fecha"
      class="border rounded-lg px-3 py-2 shadow-sm bg-white dark:bg-gray-600"
    />

    <select
      formControlName="tipo"
      class="border rounded-lg px-3 py-2 shadow-sm bg-white dark:bg-gray-600"
    >
      <option value="">Todos los tipos</option>
      <option value="LLAMADA">Llamada</option>
      <option value="EMAIL">Email</option>
      <option value="REUNION">Reunión</option>
    </select>

    <div class="md:col-span-3 flex justify-between items-center">
      <div class="flex gap-3">
        <button
          type="button"
          (click)="limpiar()"
          class="bg-brand-700 hover:bg-brand-800 text-white px-4 py-2 rounded-xl shadow-md active:scale-95"
        >
          Limpiar
        </button>
      </div>

      <a
        routerLink="/interacciones/nuevo"
        class="bg-brand-700 text-white px-4 py-2 rounded hover:bg-brand-800"
      >
        + Nueva interacción
      </a>
    </div>
  </div>
  <div>
    <table
      class="w-full table-auto mb-6 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden text-center"
    >
      <thead
        class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"
      >
        <tr>
          <th class="p-3 font-semibold">Tipo</th>
          <th class="p-3 font-semibold">Fecha</th>
          <th class="p-3 font-semibold">Cliente</th>
          <th class="p-3 font-semibold">Descripción</th>
          <th class="p-3 font-semibold">Acciones</th>
        </tr>
      </thead>

      <tbody>
        @if (interaccionesFiltradas().length === 0) {
          <tr class="border-t dark:border-gray-700">
            <td colspan="5" class="p-4 text-center text-gray-500">
              No se encontraron interacciones con esos filtros
            </td>
          </tr>
        } @else {
          @for (i of interaccionesFiltradas(); track i.id) {
            <tr
              class="border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition"
            >
              <td class="p-3 font-semibold text-brand-700">{{ i.tipo }}</td>
              <td class="p-3">
                {{ i.fechaHora | date: "dd/MM/yyyy - HH:mm" }}
              </td>
              <td class="p-3">{{ clienteNombre(i.clienteId) }}</td>
              <td class="p-3 text-left">{{ i.descripcion }}</td>
              <td class="p-3">
                <a
                  [routerLink]="['/interacciones', i.id]"
                  class="bg-brand-700 text-white px-3 py-1 rounded hover:bg-brand-800"
                >
                  Editar
                </a>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>
</div>
